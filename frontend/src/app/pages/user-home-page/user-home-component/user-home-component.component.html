<div *ngIf="user$ | async as user">

  <!-- User Profile View -->
  <mat-card *ngIf="!editMode">
    <mat-card-title>User Profile</mat-card-title>
    <mat-card-content>
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>First Name:</strong> {{ user.firstName }}</p>
      <p><strong>Last Name:</strong> {{ user.lastName }}</p>
      <p><strong>About Me:</strong> {{ user.aboutMe }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="toggleEdit()">Edit</button>
    </mat-card-actions>
  </mat-card>

  <!-- User Edit Form -->
  <mat-card *ngIf="editMode">
    <mat-card-title>Edit Profile</mat-card-title>
    <mat-card-content>
      <app-user-edit-form
        [user]="user"
        (submitForm)="handleUpdate($event)"
        (cancelEdit)="toggleEdit()" />
    </mat-card-content>
  </mat-card>

  <!-- Account Section -->
  <mat-card>
    <mat-card-title>Account</mat-card-title>
    <mat-card-actions>
      <button mat-raised-button color="warn" (click)="openLogoutDialog()">Logout</button>
      <button mat-raised-button color="warn" (click)="openDeleteDialog()">Delete Account</button>
    </mat-card-actions>
  </mat-card>

  <!-- Game Actions -->
  <mat-card class="user-home-actions">
    <mat-card-title>Game Actions</mat-card-title>
    <mat-card-content>
      <app-create-game-button></app-create-game-button>
      <app-join-game-form></app-join-game-form>
    </mat-card-content>
  </mat-card>

  <!-- Admin Panel -->
  <mat-card *ngIf="isAdmin" class="user-home-admin">
    <mat-card-title>Admin Panel</mat-card-title>
    <mat-card-content>
      <app-admin-user-list></app-admin-user-list>
    </mat-card-content>
  </mat-card>

</div>
